<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Parallel Tasks | Documentation of the Virtual Agents Framework </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Parallel Tasks | Documentation of the Virtual Agents Framework ">
    
      <link rel="shortcut icon" href="../resources/Logos/Logo_whiteBg.svg">
      <link rel="stylesheet" href="../styles/docfx.vendor.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../resources/Logos/Logo_whiteBg.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="parallel-tasks">Parallel Tasks</h1>

<p>Tasks cannot only be executed sequentially but also in parallel if they, e.g., affect different regions of the agent's body.
This means that an agent can, e.g., walk while waving its hand at the same time.
To realize this, the Virtual Agents Framework provides a parallel tasks structure where tasks can be scheduled independently but also be synchronized using dependencies between tasks.</p>
<h2 id="parallel-structure">Parallel Structure</h2>
<p>The agent consists of a series of task managers which determine which task to execute next.
By calling <a class="xref" href="../api/i5.VirtualAgents.ScheduleBasedExecution.ScheduleBasedTaskSystem.html#i5_VirtualAgents_ScheduleBasedExecution_ScheduleBasedTaskSystem_ScheduleTask_">ScheduleTask</a> without specifying a layer, the task, by default, affects the entire body.
Apart from this, there is a separate task manager for each relevant body region of the agent.
Currently, this includes the following body regions:</p>
<ul>
<li>Left Arm</li>
<li>Right Arm</li>
<li>Left Leg</li>
<li>Right Leg</li>
<li>Head</li>
</ul>
<p>When applying parallel tasks, the main use case is to layer animations.
It is recommended to always assign an animation task to the base layer and then overwrite a specific body region with a custom animation.
In the example of the walking agent which is waving its hand, the walking animation would be set up as a task on the base layer.
The waving animation is scheduled as a task on one of the two arm regions.
As a result, the agent displays the full walking movements and only its arm is concerned with the waving motion.</p>
<h2 id="synchronizing-task-layers">Synchronizing Task Layers</h2>
<p>In some cases, tasks need to wait for each other to start synchronously.
In more complex tasks, this can be achieved by implementing a start condition on the tasks using the <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.IAgentTask.html#i5_VirtualAgents_AgentTasks_IAgentTask_CanStart_">CanStart</a> property.
This pre-condition can contain any Boolean expression.
A task can, e.g., wait for another task but it can also wait for a specific condition in the agent's environment to become true.</p>
<p>Apart from this general purpose start-condition, the <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.AgentBaseTask.html">AgentBaseTask</a> also implements a dependency system where tasks can automatically wait for each other.
If task <code>a</code> depends on the completion of task <code>b</code> and both inherit from <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.AgentBaseTask.html">AgentBaseTask</a>, call <code>a.WaitFor(b)</code>.
Internally, <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.AgentBaseTask.html#i5_VirtualAgents_AgentTasks_AgentBaseTask_WaitFor_">WaitFor</a> creates a pre-condition for task <code>a</code>.
The <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.IAgentTask.html#i5_VirtualAgents_AgentTasks_IAgentTask_CanStart_">CanStart</a> property of <code>a</code> will only become <code>true</code>, once <code>b</code> has finished its execution, indicated by its <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.AgentBaseTask.html#i5_VirtualAgents_AgentTasks_AgentBaseTask_IsFinished">IsFinished</a> property.</p>
<p>If task <code>a</code> depends on multiple tasks <code>b</code> and <code>c</code>, they can quickly be defined in <a class="xref" href="../api/i5.VirtualAgents.AgentTasks.AgentBaseTask.html#i5_VirtualAgents_AgentTasks_AgentBaseTask_WaitFor_">WaitFor</a> by listing all depending tasks as <code>a.WaitFor(b, c)</code>.</p>
<h2 id="example-scenes">Example Scenes</h2>
<p>The framework contains two example scenes for parallel tasks: One of them demonstrates the independent execution of parallel tasks.
Here, the agent is assigned a series of walking tasks on its base layer and a combination of waiting and waving tasks on its left arm layer, as well as a head-shaking animation for the head.
The tasks are just executed but do not contain any synchronization.
In contract to this, the synchronization sample contains the same task sequence but here, the second waving animation will wait for the head shaking animation to complete.
Both samples contain a TasksSampleController which demonstrates how to schedule the tasks and how to set the dependencies.</p>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/rwth-acis/Virtual-Agents-Framework/blob/develop/Documentation/manual/parallel-tasks.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      Documentation of the Virtual Agents Framework
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
